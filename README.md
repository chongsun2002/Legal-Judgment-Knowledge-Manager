# Legal Judgment Knowledge Manager

# User Guide

## Installation Instructions
1. Install Python 3.12.7 [here](https://www.python.org/downloads/release/python-3127/)
2. Clone the repository onto your local machine with `git clone`
3. Create a python virtual environment or use any other package manager of your choice such as anaconda, as long as you are able to install the packages in `requirements.txt`. You can create a venv with `python -m venv /path/to/new/virtual/environment`.
4. Run `python app.py` in a terminal to start the application. To prevent any path issues, **ensure you do this from the root** Legal-Judgment-Knowledge-Manager directory. The first time you run this application, it may take longer to startup as the models need to be loaded.
5. You may view the api reference generated by swagger on `http://127.0.0.1:5000/api`. If using another base url and port, change that accordingly.
6. If there are any files that cannot be parsed properly (not known, but just in case), `[2014] 2 SLR 998.pdf` is an example that has been known to work properly. You may use this for positive testing of the application.

# Developer Guide

## Tech Stack
**Flask** is the main backend framework. This was because the AGC's POC framework is flask. The **flask-restx** extension is used on top of the flask framework, mainly to generate the swagger API docs, and also for the inbuilt data validation.

**sqlite3** is the database used for storing metadata and information about the documents. This is used for prototyping and should not be used for production, due to its lack of scalability. It is chosen here so the user does not have to setup a separate database.

**chroma db** is the vector db of choice for storing the documents. Likewise, it is chosen over a production level db like pinecone due to ease of use for local prototyping.

## Directory Structure

### Controllers
The controllers folder contains the route handlers for all requests made to the Flask application.

### Services
The buiness logic layer called by the methods in `/controllers` after data is received. The directory structure of `/services` corresponds to `/controllers`, i.e. there is 1 service for each controller that exists.

### Models
Data validation models for each of the controllers. The directory structure of `/models` corresponds to `/controllers`, i.e. there is 1 model for each controller that exists.

### Features
The features that the business layer logic relies on.
1. ETL Features - The logic for embedding generation, text processing of the PDFs and management of the chroma vector db.
2. Storage - The logic for storage of document metadata into sqlite3 db and files onto local filesystem.
For example, extract.py contains text-preprocessing features which `judgments_service.py`'s upload function will rely on.

# Gen AI use declaration
Generative AI (GPT 4o) was used for the following purposes:
1. Help with understanding and learning about the various technologies available to help fulfill the requirements of the task.  
Queries such as `Does flask support swagger? How can I setup swagger for flask?` were used to understand these limitations.

2. Boilerplating code, particularly in the controllers.
- Generative AI was used to create models for my controllers, which I manually screened through the output and had to refer to flask_restx documentation as some models were not created/validated properly.
- It was also used to boilerplate the sqlite db setup, as I have used sqlite3 for multiple small scale projects and there was no learning outcome for me here. Once again, I had to do a code review on the generated code to ensure there are no security vulnerabilities and other issues.

